<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test task for MGS</title>

    <link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/main.css" rel="stylesheet">

    <script src="/webjars/jquery/jquery.min.js"></script>
    <script src="/webjars/sockjs-client/sockjs.min.js"></script>
    <script src="/webjars/stomp-websocket/stomp.min.js"></script>
    <script src="/static/js/app.js"></script>
</head>
<style>
    #length {
        width: 300px;
    }
</style>
<body>

<h2>I was created to generate sequences of numbers. <br>
    If you want to specify the length of the sequence, enter it in the line below and the AUTO button. <br>
    If you want to get 5 random sequences - press the GENERATE button.</h2>

<div class="container">
    <div id="messages" class="messages"></div>
    <div class="input-fields">
        <input type="number" min="10" max="100" name="length" id="length"
               placeholder="Set the length of the array..." required>
        <button id="auto">AUTO</button>
        <button id="generate">GENERATE</button>
    </div>
</div>
</body>

<script>
    const messageWindow = document.getElementById("messages");

    const sendAutoButton = document.getElementById("auto");
    const sendGenerateButton = document.getElementById("generate");

    const messageInput = document.getElementById("length");

    const socket = new WebSocket("ws://localhost:8080/socket");
    socket.binaryType = "arraybuffer";

    socket.onopen = function (event) {
        addMessageToWindow("Connected to webSocket....");
    };

    socket.onmessage = function (event) {
        addMessageToWindow(`Generated Sequence : ${event.data}`);
    };

    sendAutoButton.onclick = function (event) {
        sendMessage(messageInput.value);
        messageInput.value = "";
    };

    sendGenerateButton.onclick = function (event) {
    };

    function sendMessage(length) {
        socket.send(length);
        addMessageToWindow("You have set the length of the array :" + length);
    }

    function addMessageToWindow(length) {
        messageWindow.innerHTML += `<div>${length}</div>`
    }

</script>
</html>